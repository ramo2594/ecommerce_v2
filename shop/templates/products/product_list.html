{% extends "base.html" %}
{% load static %}

{% block title %}Products - E-Commerce{% endblock %}

{% block content %}
<div class="container-fluid py-5">
    <!-- HEADER SECTION -->
    <div class="row align-items-center mb-5">
        <div class="col-lg-6">
            <h1 class="display-4 fw-bold mb-2">
                <i class="fas fa-boxes me-3 text-primary"></i>Our Products
            </h1>
            <p class="lead text-muted">
                <i class="fas fa-info-circle me-2"></i>{{ products.paginator.count }} products available
            </p>
        </div>

        <!-- SEARCH BAR -->
        <div class="col-lg-6 mt-4 mt-lg-0">
            <form method="get" class="d-flex gap-2">
                <input 
                    type="text" 
                    name="search"
                    class="form-control form-control-lg"
                    placeholder="Search products..."
                    value="{{ search_query }}"
                    aria-label="Search products"
                >
                <button type="submit" class="btn btn-primary btn-lg">
                    <i class="fas fa-search"></i>
                </button>
            </form>
        </div>
    </div>

    <!-- CATEGORY FILTERS -->
    {% if categories %}
    <div class="mb-5">
        <div class="d-flex flex-wrap gap-2">
            <a 
                href="{% url 'shop:product-list' %}" 
                class="btn btn-sm {% if not request.GET.category %}btn-primary{% else %}btn-outline-primary{% endif %}"
            >
                All Categories
            </a>
            {% for category in categories %}
                <a 
                    href="?category={{ category.slug }}" 
                    class="btn btn-sm {% if request.GET.category == category.slug %}btn-primary{% else %}btn-outline-primary{% endif %}"
                >
                    {{ category.name }}
                </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- PRODUCTS GRID -->
    <div class="row g-4 mb-5 products-grid">
        {% for product in products %}
            {% include "products/includes/product_card.html" %}
        {% empty %}
            <div class="col-12">
                <div class="text-center py-5 my-5">
                    <i class="fas fa-inbox fa-5x text-secondary mb-4 opacity-25"></i>
                    <h3 class="text-secondary fw-bold mb-2">No Products Available</h3>
                    <p class="text-muted mb-4">Check back soon for new products!</p>
                    <a href="{% url 'shop:product-list' %}" class="btn btn-primary">
                        <i class="fas fa-redo me-2"></i>Refresh Page
                    </a>
                </div>
            </div>
        {% endfor %}
    </div>

    <!-- PAGINATION -->
    {% include "components/pagination.html" %}
</div>
{% endblock %}
